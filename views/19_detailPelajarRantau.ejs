<div class="container">
	<div class="d-flex justify-content-center">
		<div class="card mt-5 mb-5" style="width: 30rem">
			<div class="card-body">
				<h5 class="card-title text-center"><%= masyarakat.nama.toUpperCase() %></h5>

				<p class="card-subtitle mb-3 text-muted text-center">
					<%= masyarakat.golongan.toUpperCase() %>
				</p>

				<div class="row mb-2">
					<label class="col-sm-4 col-form-label">Nomor KK</label>
					<div class="col-sm-8">
						<input class="form-control" value="<%= masyarakat.no_KK %>" disabled />
					</div>
				</div>

				<div class="row mb-2">
					<label class="col-sm-4 col-form-label">NIK</label>
					<div class="col-sm-8">
						<input class="form-control" value="<%= masyarakat.NIK %>" disabled />
					</div>
				</div>

				<div class="row mb-2">
					<label class="col-sm-4 col-form-label">Tempat Lahir</label>
					<div class="col-sm-8">
						<input class="form-control" value="<%= masyarakat.tempat_lahir %>" disabled />
					</div>
				</div>

				<div class="row mb-2">
					<label class="col-sm-4 col-form-label">Tanggal Lahir</label>
					<div class="col-sm-8">
						<input class="form-control" value="<%= masyarakat.tanggal_lahir %>" disabled />
					</div>
				</div>

				<div class="row mb-2">
					<label class="col-sm-4 col-form-label">Alamat</label>
					<div class="col-sm-8">
						<input
							class="form-control"
							value="<%= masyarakat.dusun %>, <%= gampong.nama_gampong %>, <%=gampong.kecamatan %>, Aceh Besar"
							disabled
						/>
					</div>
				</div>

				<div class="row mb-2">
					<label class="col-sm-4 col-form-label">Pekerjaan Orang Tua/Wali</label>
					<div class="col-sm-8">
						<% if (golongan.pekerjaan == 1) { %>
						<input class="form-control" disabled value="Tidak Bekerja" />
						<% } else if (golongan.pekerjaan == 2) { %>
						<input class="form-control" disabled value="Petani/Nelayan/Ternak/Buruh" />
						<% } else if (golongan.pekerjaan == 3) { %>
						<input class="form-control" disabled value="Pedagang" />
						<% } else if (golongan.pekerjaan == 4) { %>
						<input class="form-control" disabled value="Pegawai Kontrak" />
						<% } else if (golongan.pekerjaan == 5) { %>
						<input class="form-control" disabled value="ASN/Pegawai BUMN" />
						<% } %>
					</div>
				</div>

				<div class="row mb-2">
					<label class="col-sm-4 col-form-label">Pendapatan Orang Tua/Wali (per Bulan)</label>
					<div class="col-sm-8">
						<% if (golongan.pendapatan == 1) { %>
						<input class="form-control" disabled value="Tidak Ada" />
						<% } else if (golongan.pendapatan == 2) { %>
						<input class="form-control" disabled value="< Rp 200.000" />
						<% } else if (golongan.pendapatan == 3) { %>
						<input class="form-control" disabled value="Rp 201.000 - Rp 500.000" />
						<% } else if (golongan.pendapatan == 4) { %>
						<input class="form-control" disabled value="Rp 501.000 - Rp 800.000" />
						<% } else if (golongan.pendapatan == 5) { %>
						<input class="form-control" disabled value="Rp 801.000 - Rp 1.000.000" />
						<% } else if (golongan.pendapatan == 6) { %>
						<input class="form-control" disabled value="Rp 1.001.000 - Rp 1.500.000" />
						<% } else if (golongan.pendapatan == 7) { %>
						<input class="form-control" disabled value="Rp 1.501.000 - Rp 2.000.000" />
						<% } else if (golongan.pendapatan == 8) { %>
						<input class="form-control" disabled value="> Rp 2.000.000" />
						<% } %>
					</div>
				</div>

				<div class="row mb-2">
					<label class="col-sm-4 col-form-label">Masa Pendidikan</label>
					<div class="col-sm-8">
						<% if (golongan.masa_belajar == 1) { %>
						<input class="form-control" disabled value="> 5 Tahun" />
						<% } else if (golongan.masa_belajar == 2) { %>
						<input class="form-control" disabled value="4 - 5 Tahun" />
						<% } else if (golongan.masa_belajar == 3) { %>
						<input class="form-control" disabled value="3 - 4 Tahun" />
						<% } else if (golongan.masa_belajar == 4) { %>
						<input class="form-control" disabled value="2 - 3 Tahun" />
						<% } else if (golongan.masa_belajar == 5) { %>
						<input class="form-control" disabled value="1 - 2 Tahun" />
						<% } else if (golongan.masa_belajar == 6) { %>
						<input class="form-control" disabled value="< 1 Tahun" />
						<% }%>
					</div>
				</div>

				<div class="row mb-2">
					<label class="col-sm-4 col-form-label">Nomor Rekening</label>
					<div class="col-sm-8">
						<input class="form-control" disabled value="<%= golongan.norekening %>" />
					</div>
				</div>

				<div class="row mb-2">
					<label class="col-sm-4 col-form-label">Paspor</label>
					<div class="col-sm-8">
						<% if (golongan.bobot_paspor == 1) { %>
						<input class="form-control" disabled value="Memiliki bukti paspor" />
						<% } else { %>
						<input class="form-control" disabled value="Tidak Ada" />
						<% } %>
					</div>
				</div>

				<div class="row mb-2">
					<label class="col-sm-4 col-form-label">Ijazah Terakhir</label>
					<div class="col-sm-8">
						<% if (golongan.bobot_ijazah == 1) { %>
						<input class="form-control" disabled value="Memiliki bukti ijazah" />
						<% } else { %>
						<input class="form-control" disabled value="Tidak Ada" />
						<% } %>
					</div>
				</div>

				<div class="row mb-2">
					<label class="col-sm-4 col-form-label">Foto Rekening</label>
					<div class="col-sm-8">
						<% if (golongan.bobot_rekening == 1) { %>
						<input class="form-control" disabled value="Memiliki foto rekening" />
						<% } else { %>
						<input class="form-control" disabled value="Tidak Ada" />
						<% } %>
					</div>
				</div>

				<div class="row mb-2">
					<label class="col-sm-4 col-form-label">Surat Aktif Belajar</label>
					<div class="col-sm-8">
						<% if (golongan.bobot_keterangan == 1) { %>
						<input class="form-control" disabled value="Memiliki surat aktif" />
						<% } else { %>
						<input class="form-control" disabled value="Tidak Ada" />
						<% } %>
					</div>
				</div>

				<div class="row mb-2">
					<label class="col-sm-4 col-form-label">Waktu Proses</label>
					<div class="col-sm-8">
						<input class="form-control" disabled value="<%=
						masyarakat.waktu_proses.toLocaleDateString("id") %>" />
					</div>
				</div>
				<div class="row mb-2">
					<label class="col-sm-4 col-form-label">Update Data</label>
					<div class="col-sm-8">
						<input class="form-control" disabled value=" <%=
						masyarakat.updatedAt.toLocaleDateString("id") %>" />
					</div>
				</div>
				<div class="row mb-2">
					<label class="col-sm-4 col-form-label">Update Golongan</label>
					<div class="col-sm-8">
						<input class="form-control" disabled value="<%=
						golongan.updatedAt.toLocaleDateString("id") %>" />
					</div>
				</div>

				<div class="row text-center mb-2 mt-4">
					<% if (session?.user?.role=="staf") { %>
						<div class="col">
							<form
								action="/masyarakat/reset/<%= masyarakat.NIK %>?_method=PUT" method="POST"
							>
								<button
									type="button"
									class="btn btn-info badge"
									onclick="return confirmHandlerReset(this, '<%= masyarakat.nama %>')"
								>
									Reset
								</button>
								<input type="hidden" name="golongan" value="<%= masyarakat.golongan %>">
							</form>
						</div>
					<% } %>

					<% if (session?.user?.role=="gampong") { %>
					<div class="col">
						<a href="/masyarakat/edit/<%= masyarakat.NIK %>" class="btn btn-warning badge">Edit </a>
					</div>
					<div class="col">
						<a href="/<%= endpoint %>/edit/<%= masyarakat.NIK %>" class="btn btn-warning badge"
							>Edit Data Golongan</a
						>
					</div>
					<div class="col">
						<form
							action="/masyarakat/<%= masyarakat.NIK %>?_method=DELETE"
							id="formDelete"
							method="POST"
						>
							<button
								type="button"
								class="btn btn-danger badge"
								onclick="return confirmHandler(this, '<%= masyarakat.nama %>')"
							>
								Del
							</button>
						</form>
					</div>
					
				</div>
				<% } %>
				<div class="flex mt-5">
					<a href="#" class="btn btn-secondary badge" onclick="goBack()">Kembali</a>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	function goBack() {
		window.history.back();
	}

	function confirmHandler(button, nama) {
		const swalWithBootstrapButtons = Swal.mixin({
			customClass: {
				confirmButton: "btn btn-success",
				cancelButton: "btn btn-danger",
			},
			buttonsStyling: false,
		});

		swalWithBootstrapButtons
			.fire({
				title: "Apakah anda yakin?",
				text: `menghapus data ${nama} ?`,
				icon: "warning",
				showCancelButton: true,
				confirmButtonText: "Ya, hapus!",
				cancelButtonText: "Batal!",
				reverseButtons: true,
			})
			.then((result) => {
				if (result.isConfirmed) {
					button.parentElement.submit();
					swalWithBootstrapButtons.fire("Deleted!", `Data ${nama} berhasil dihapus`, "success");
				} else if (
					/* Read more about handling dismissals below */
					result.dismiss === Swal.DismissReason.cancel
				) {
					swalWithBootstrapButtons.fire("Cancelled", `Data ${nama} masih tersimpan`, "error");
				}
			});
	}

	function confirmHandlerReset(button, nama) {
		const swalWithBootstrapButtons = Swal.mixin({
			customClass: {
				confirmButton: "btn btn-success",
				cancelButton: "btn btn-danger",
			},
			buttonsStyling: false,
		});

		swalWithBootstrapButtons
			.fire({
				title: "Apakah anda yakin?",
				text: `mereset data ${nama} ?`,
				icon: "warning",
				showCancelButton: true,
				confirmButtonText: "Ya, reset!",
				cancelButtonText: "Batal!",
				reverseButtons: true,
			})
			.then((result) => {
				if (result.isConfirmed) {
					button.parentElement.submit();
					swalWithBootstrapButtons.fire("Reset!", `Data ${nama} berhasil direset`, "success");
				} else if (
					/* Read more about handling dismissals below */
					result.dismiss === Swal.DismissReason.cancel
				) {
					swalWithBootstrapButtons.fire("Cancelled", `Data ${nama} masih tersimpan`, "error");
				}
			});
	}
</script>