<div class="container">
    <div class="d-flex justify-content-center">
      <div class="card mt-5 mb-5" style="width: 30rem">
        <div class="card-body">
          <h5 class="card-title text-center">
            <%= masyarakat.nama.toUpperCase() %>
          </h5>

          <p class="card-subtitle mb-3 text-muted text-center">
            <%= masyarakat.golongan.toUpperCase() %>
          </p>

          <div class="row mb-2">
            <label class="col-sm-4 col-form-label">Nomor KK</label>
            <div class="col-sm-8">
              <input
                class="form-control"
                value="<%= masyarakat.no_KK %>"
                disabled
              />
            </div>
          </div>

          <div class="row mb-2">
            <label class="col-sm-4 col-form-label">NIK</label>
            <div class="col-sm-8">
              <input
                class="form-control"
                value="<%= masyarakat.NIK %>"
                disabled
              />
            </div>
          </div>

          <div class="row mb-2">
            <label class="col-sm-4 col-form-label">Alamat</label>
            <div class="col-sm-8">
              <input
                class="form-control"
                value="<%= masyarakat.dusun %>, <%= gampong.nama_gampong %>, <%=gampong.kecamatan %>, Aceh Besar"
                disabled
              />
            </div>
          </div>

          <div class="row mb-2">
            <label class="col-sm-4 col-form-label">Nomor Rekening</label>
            <div class="col-sm-8">
              <input
                class="form-control"
                disabled
                value="<%= golongan.norekening %> Tahun"
              />
            </div>
          </div>
  
          <div class="row mb-2">
            <label class="col-sm-4 col-form-label">Surat Permohonan</label>
            <div class="col-sm-8">
              <% if (golongan.bobot_surat == 1) { %>
              <input
                class="form-control"
                disabled
                value="Memiliki surat permohonan"
              />
              <% } else { %>
              <input class="form-control" disabled value="Tidak Ada" />
              <% } %>
            </div>
          </div>

          <div class="row mb-2">
            <label class="col-sm-4 col-form-label">Izin Operasional</label>
            <div class="col-sm-8">
              <% if (golongan.bobot_izin == 1) { %>
              <input
                class="form-control"
                disabled
                value="Memiliki bukti izin operasional"
              />
              <% } else { %>
              <input class="form-control" disabled value="Tidak Ada" />
              <% } %>
            </div>
          </div>

          <div class="row mb-2">
            <label class="col-sm-4 col-form-label">SK Pengurus</label>
            <div class="col-sm-8">
              <% if (golongan.bobot_SK == 1) { %>
              <input
                class="form-control"
                disabled
                value="Memiliki SK Kepengurusan"
              />
              <% } else { %>
              <input class="form-control" disabled value="Tidak Ada" />
              <% } %>
            </div>
          </div>

          <div class="row mb-2">
            <label class="col-sm-4 col-form-label">Data Siswa dan Pengajar</label>
            <div class="col-sm-8">
              <% if (golongan.bobot_data == 1) { %>
              <input
                class="form-control"
                disabled
                value="Memiliki Data Madrasah"
              />
              <% } else { %>
              <input class="form-control" disabled value="Tidak Ada" />
              <% } %>
            </div>
          </div>

          <div class="row mb-2">
            <label class="col-sm-4 col-form-label">Foto Kegiatan PBM</label>
            <div class="col-sm-8">
              <% if (golongan.bobot_PBM == 1) { %>
              <input
                class="form-control"
                disabled
                value="Memiliki bukti kegiatan PBM"
              />
              <% } else { %>
              <input class="form-control" disabled value="Tidak Ada" />
              <% } %>
            </div>
          </div>

          <div class="row mb-2">
            <label class="col-sm-4 col-form-label">Foto Rekening</label>
            <div class="col-sm-8">
              <% if (golongan.bobot_rekening == 1) { %>
              <input
                class="form-control"
                disabled
                value="Memiliki foto rekening"
              />
              <% } else { %>
              <input class="form-control" disabled value="Tidak Ada" />
              <% } %>
            </div>
          </div>
  
          <div class="row mb-2">
            <label class="col-sm-4 col-form-label">Waktu Proses</label>
            <div class="col-sm-8">
              <input class="form-control" disabled value="<%=
              masyarakat.waktu_proses.toLocaleDateString("id") %>" />
            </div>
          </div>
          <div class="row mb-2">
            <label class="col-sm-4 col-form-label">Update Data</label>
            <div class="col-sm-8">
              <input class="form-control" disabled value=" <%=
              masyarakat.updatedAt.toLocaleDateString("id") %>" />
            </div>
          </div>
          <div class="row mb-2">
            <label class="col-sm-4 col-form-label">Update Golongan</label>
            <div class="col-sm-8">
              <input class="form-control" disabled value="<%=
              golongan.updatedAt.toLocaleDateString("id") %>" />
            </div>
          </div>
  
          <% if (session?.user?.role=="gampong") { %>
  
          <div class="row text-center mb-2 mt-4">
            <div class="col">
              <a
                href="/masyarakat/edit/<%= masyarakat.NIK %>"
                class="btn btn-warning badge"
                >Edit
              </a>
            </div>
            <div class="col">
              <a
                href="/<%= endpoint %>/edit/<%= masyarakat.NIK %>"
                class="btn btn-warning badge"
                >Edit Data Golongan</a
              >
            </div>
            <div class="col">
              <form
                action="/masyarakat/<%= masyarakat.NIK %>?_method=DELETE"
                id="formDelete"
                method="POST"
              >
                <button
                  type="button"
                  class="btn btn-danger badge"
                  onclick="return confirmHandler(this, '<%= masyarakat.nama %>')"
                >
                  Del
                </button>
              </form>
            </div>
          </div>
          <% } %> <% if (session?.user?.role=="staf") { %>
          <a href="/<%= endpoint %>">&laquo; Kembali</a>
          <% } else { %>
          <a href="/masyarakat">&laquo; Kembali</a>
          <% } %>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    function confirmHandler(button, nama) {
      const swalWithBootstrapButtons = Swal.mixin({
        customClass: {
          confirmButton: "btn btn-success",
          cancelButton: "btn btn-danger",
        },
        buttonsStyling: false,
      });
  
      swalWithBootstrapButtons
        .fire({
          title: "Apakah anda yakin?",
          text: `menghapus data ${nama} ?`,
          icon: "warning",
          showCancelButton: true,
          confirmButtonText: "Ya, hapus!",
          cancelButtonText: "Batal!",
          reverseButtons: true,
        })
        .then((result) => {
          if (result.isConfirmed) {
            button.parentElement.submit();
            swalWithBootstrapButtons.fire(
              "Deleted!",
              `Data ${nama} berhasil dihapus`,
              "success"
            );
          } else if (
            /* Read more about handling dismissals below */
            result.dismiss === Swal.DismissReason.cancel
          ) {
            swalWithBootstrapButtons.fire(
              "Cancelled",
              `Data ${nama} masih tersimpan`,
              "error"
            );
          }
        });
    }
  </script>
  