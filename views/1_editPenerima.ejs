<div class="container mt-3">
  <div class="row center">
    <div class="col-md-3">
      <a href="/masyarakat/<%= masyarakat.NIK %>" class="btn btn-success badge"
        >&laquo; Kembali</a
      >
    </div>
    <div class="col-md-6">
      <h2 class="fw-bold">FORM UBAH DATA MASYARAKAT</h2>
    </div>
  </div>
  <% if (typeof errors != 'undefined') { %>
  <div class="alert alert-danger" role="alert">
    <ul>
      <% errors.forEach(error => { %>
      <li><%= error %></li>
      <% }) %>
    </ul>
    <% } %>
  </div>
  <div class="row">
    <div class="col-md-6">
      <form
        method="post"
        id="formUbah"
        action="/masyarakat/<%= masyarakat.NIK %>?_method=PUT"
        enctype="multipart/form-data"
      >
        <div class="mb-3">
          <label for="nama" class="form-label">Nama</label>
          <input
            type="text"
            class="form-control"
            id="nama"
            name="nama"
            required
            value="<%= masyarakat.nama %>"
          />
        </div>
        <div class="mb-3">
          <label for="tempat_lahir" class="form-label">Tempat Lahir</label>
          <input
            type="text"
            class="form-control"
            id="tempat_lahir"
            name="tempat_lahir"
            required
            value="<%= masyarakat.tempat_lahir %>"
          />
        </div>
        <button
          type="button"
          class="btn btn-success"
          onclick="return confirmHandler(this, '<%= masyarakat.nama %>')"
        >
          Simpan perubahan
        </button>
      </form>
    </div>
  </div>
</div>

<script>
  function confirmHandler(button, nama) {
    Swal.fire({
      title: `Apakah Anda yakin ingin mengubah data ${nama}?`,
      showCancelButton: true,
      confirmButtonText: "Update",
    }).then((result) => {
      /* Read more about isConfirmed, isDenied below */
      if (result.isConfirmed) {
        document.getElementById("formUbah").submit();
      } else if (result.isDenied) {
        Swal.fire("Perubahan tidak disimpan", "", "info");
      }
    });
  }
</script>
